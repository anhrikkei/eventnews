<div id="categories">
    {% if ds_danhmuc %}
    <table id="tb" class="table table-striped table-hover">
        <thead class="table-striped">
            <th></th>
            <th>Tên danh mục</th>
            <th>Mô tả</th>
            <th>Ngày tạo</th>
            <th>Ngày sửa</th>
            <th>Người tạo</th>
            <th>Đưa lên menu</th>
            <th></th>
            <th></th>
        </thead>
        <tbody class="table-striped">
        {% for danhmuc in ds_danhmuc %}
            <tr>
                <td>#</td>
                <td>{{danhmuc.name}}</td>
                <td>{{danhmuc.describe}}</td>
                <td>{{danhmuc.datetime_created|safe}}</td>
                <td>{{danhmuc.datetime_updated|safe}}</td>
                <td>{{danhmuc.user_id}}</td>
                <td>
                    <div class="form-group" style="background-color: gray; max-width: 70px">
                        <a href="../is_menu/{{danhmuc.id}}">
                            <button type="" style="background-color: #00a98f" class="btn btn-sm btn-success">
                                <i class="fa fa-exchange"></i>
                            </button>
                        </a>
                        <small name="btnmenu" style="color:white">
                            <i>{{danhmuc.show_as_menu}}</i>
                        </small>
                    </div>
                </td>
                <td><a href="../danhmuc_sua/{{danhmuc.id}}">
                    <i style="color: #00a98f" class="glyphicon glyphicon-edit"></i></a>
                </td>
                <td>
                    <button id="{{danhmuc.id}}" class="btn-link">
                        <i style="color: #00a98f" class="glyphicon glyphicon-trash"></i>
                    </button>
                    <script>
                        $("#{{danhmuc.id}}").click(function(){
                            if(confirm('Xóa danh mục {{danhmuc.id}} sẽ mất các bài viết trong danh mục?')==true){
                                window.location='../danhmuc_xoa/{{danhmuc.id}}';
                                }
                            else{
                                return false;
                            }
                        })
                    </script>
                </td>

            </tr>
        {% endfor %}
        </tbody>
    </table>
    <!--phân trang-->
     <div id="pagination" class="pull-right">
        <ul class="pagination pagination-sm">
            <span class="step-links">
                {% if ds_danhmuc.has_previous %}
                    <a class="page-links" href="?page=1&search={{search}}" data-search="{{search}}" data-page="1">
                        <i class="glyphicon glyphicon-backward"></i>
                    </a>
                {% endif %}
            </span>
            <span class="step-links">
                {% if ds_danhmuc.has_previous %}
                    <a class="page-links" href="?page={{ ds_danhmuc.previous_page_number }}&search={{search}}" data-search="{{search}}" data-page="{{ ds_danhmuc.previous_page_number }}">
                        <i class="glyphicon glyphicon-chevron-left"></i>
                    </a>
                {% endif %}
            </span>
            <span class="current">
                Trang {{ ds_danhmuc.number }} / {{ ds_danhmuc.paginator.num_pages }}
            </span>
            <span>
                {% if ds_danhmuc.has_next %}
                    <a class="page-links" href="?page={{ ds_danhmuc.next_page_number }}&search={{search}}" data-search="{{search}}" data-page="{{ ds_danhmuc.next_page_number }}"><i class="glyphicon glyphicon-chevron-right"></i></a>
                {% endif %}
            </span>
            <span>
                {% if ds_danhmuc.has_next %}
                    <a class="page-links" href="?page={{ ds_danhmuc.paginator.num_pages }}&search={{search}}" data-search="{{search}}" data-page="{{ ds_danhmuc.paginator.num_pages }}"><i class="glyphicon glyphicon-forward"></i></a>
                {% endif %}
            </span>
        </ul>
     </div>
    {% if search %}
     <div id="export" class="pull-left">
            <ul class="pagination pagination-sm">
                <a class="export" href="../danhmuc_export_csv/{{search}}"><i class="fa fa-download">.csv</i></a> |
                {{count_result}}
             </ul>
        </div>
    {% endif %}
    <!--//phân trang-->
    {% else %}
        <center> không có dữ liệu thỏa mãn...</center>
    {% endif %}
    <script>
        $("#categories #pagination a.page-links").click(function(event){
            event.preventDefault();
            $.ajax({
                type: 'GET',
                url: '../danhmuc_ajaxsearch/',
                data:{
                    'search': $(this).data('search'),
                    'page': $(this).data('page'),
                },
                success: function(data){
                    $("#categories").replaceWith(data);
                }
            });
        });
    </script>
</div>